<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="assets/styles/global.css">
    <link rel="stylesheet" href="assets/styles/astrology-style.css">
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
    <title>Western Astrology</title>
</head>

<body id="astrology">
    <a href="index.html" class="home-btn">&lt;</a>
    <button id="lang-toggle" aria-label="Switch language" aria-pressed="false">TH</button>
    <button id="info-btn">üîÆ</button>
    <div id="info-box">
        <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
        <p>‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î
            ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏•‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</p>
    </div>
    <div class="bg">
        <div class="star-field">
            <div class="layer"></div>
            <div class="layer"></div>
            <div class="layer"></div>
        </div>
    </div>
    <div class="layout">
        <main>
            <h1 id="astro-h1">Western Astrology</h1>
            <label><span>Tell us when and where you were born ‚Äîthe stars will reflect your soul and reveal who you truly are.</span></label>
            <div id="information">
                <!-- ‡∏ß‡∏±‡∏ô ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏õ‡∏µ -->
                <label for="dob-day">Born</label>
                <select id="dob-day">
                    <option value="">Day</option>
                    <script>
                        for (let i = 1; i <= 31; i++) {
                            document.write(`<option value="${i}">${String(i).padStart(2, "0")}</option>`);
                        }
                    </script>
                </select>

                <select id="dob-month">
                    <option value="">Month</option>
                    <script>
                        const months = [
                            "January", "February", "March", "April", "May", "June",
                            "July", "August", "September", "October", "November", "December"
                        ];
                        months.forEach((m, idx) => {
                            document.write(`<option value="${idx + 1}">${m}</option>`);
                        });
                    </script>
                </select>

                <select id="dob-year">
                    <option value="">Year</option>
                    <script>
                        let currentYear = new Date().getFullYear();
                        for (let y = currentYear; y >= 1900; y--) {
                            document.write(`<option value="${y}">${y}</option>`);
                        }
                    </script>
                </select>

                <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î ‡πÅ‡∏¢‡∏Å‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà -->
                <div>
                    <label for="hour">When</label>
                    <select id="hour">
                        <option value="">Hour</option>
                        <script>
                            for (let i = 0; i < 24; i++) {
                                document.write(`<option value="${i}">${String(i).padStart(2, "0")}</option>`);
                            }
                        </script>
                    </select>
                    :
                    <select id="minute">
                        <option value="">Minute</option>
                        <script>
                            for (let i = 0; i < 60; i++) {
                                document.write(`<option value="${i}">${String(i).padStart(2, "0")}</option>`);
                            }
                        </script>
                    </select>
                </div>
                <label for="placeOfBirth">Where</label>
                <input type="text" class="text-input" id="placeOfBirth" name="placeOfBirth"
                    placeholder="Where you were born" autocomplete="off">

                <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á autocomplete -->
                <ul id="suggestions"
                    style="list-style:none; margin:0; padding:0; border:1px solid #ccc; max-width:300px; position:absolute; background:white; z-index:1000;">
                </ul>
                <br>

                <!-- ‡∏ä‡πà‡∏≠‡∏á lat/lon -->
                <label for="latitude">Latitude</label>
                <input type="text" class="text-input" id="latitude" readonly>

                <label for="longitude">Longitude</label>
                <input type="text" class="text-input" id="longitude" readonly>
            </div>
            <div id="btn-container">
                <button class="btn" id="planet-btn">See Your planet</button>
            </div>

            <div id="popup" class="popup">
                <div class="popup-content">
                    <div id="popup-message"></div>
                </div>
            </div>
        </main>
        <aside>
            <div id="astrology-aside">
                <img src="assets/images/astrology-new.png" alt="astrology">
            </div>
        </aside>

        <script src="scripts/astrology.js" type="module"></script>
        <script src="scripts/location.js" type="module"></script>
        <script>
            const infoBtn = document.getElementById("info-btn");
            const infoBox = document.getElementById("info-box");

            infoBtn.addEventListener("click", (e) => {
                e.stopPropagation();
                infoBox.classList.toggle("show");
            });

            document.addEventListener("click", (e) => {
                if (!infoBox.contains(e.target) && e.target !== infoBtn) {
                    infoBox.classList.remove("show");
                }
            });
        </script>
        <script>
            const translations = {
                en: {
                    title: "Western Astrology",
                    desc: "Tell us when and where you were born ‚Äî the stars will reflect your soul and reveal who you truly are.",
                    born: "Born",
                    day: "Day",
                    month: "Month",
                    year: "Year",
                    when: "When",
                    hour: "Hour",
                    minute: "Minute",
                    where: "Where",
                    placeholderWhere: "Where you were born",
                    latitude: "Latitude",
                    longitude: "Longitude",
                    planet: "See Your planet",
                    house: "See Your house"
                },
                th: {
                    title: "‡πÇ‡∏´‡∏£‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å",
                    desc: "‡∏ö‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‚Äî ‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß‡∏à‡∏∞‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ú‡∏¢‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á",
                    born: "‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î",
                    day: "‡∏ß‡∏±‡∏ô",
                    month: "‡πÄ‡∏î‡∏∑‡∏≠‡∏ô",
                    year: "‡∏õ‡∏µ",
                    when: "‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î",
                    hour: "‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á",
                    minute: "‡∏ô‡∏≤‡∏ó‡∏µ",
                    where: "‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î",
                    placeholderWhere: "‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡∏¥‡∏î",
                    latitude: "‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î",
                    longitude: "‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î",
                    planet: "‡∏î‡∏π‡∏î‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß",
                    house: "‡∏î‡∏π‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß"
                }
            };

            const LANG_KEY = "siteLang";
            const DEFAULT_LANG = "en";

            function getLang() {
                return localStorage.getItem(LANG_KEY) || DEFAULT_LANG;
            }

            function applyLang(lang) {
                document.documentElement.lang = lang;

                document.querySelector("h1").textContent = translations[lang].title;
                document.querySelector("label span").textContent = translations[lang].desc;
                document.querySelector("label[for='dob-day']").textContent = translations[lang].born;

                const selects = {
                    "#dob-day option[value='']": translations[lang].day,
                    "#dob-month option[value='']": translations[lang].month,
                    "#dob-year option[value='']": translations[lang].year,
                    "#hour option[value='']": translations[lang].hour,
                    "#minute option[value='']": translations[lang].minute,
                };
                for (const sel in selects) {
                    const el = document.querySelector(sel);
                    if (el) el.textContent = selects[sel];
                }

                document.querySelector("label[for='hour']").textContent = translations[lang].when;
                document.querySelector("label[for='placeOfBirth']").textContent = translations[lang].where;
                document.querySelector("#placeOfBirth").placeholder = translations[lang].placeholderWhere;
                document.querySelector("label[for='latitude']").textContent = translations[lang].latitude;
                document.querySelector("label[for='longitude']").textContent = translations[lang].longitude;

                document.getElementById("planet-btn").textContent = translations[lang].planet;

                // toggle button text
                const btn = document.getElementById("lang-toggle");
                btn.textContent = lang === "en" ? "TH" : "EN";
                btn.setAttribute("aria-pressed", lang === "th");
                localStorage.setItem(LANG_KEY, lang);
            }

            document.addEventListener("DOMContentLoaded", () => {
                let lang = getLang();
                applyLang(lang);

                const btn = document.getElementById("lang-toggle");
                btn.addEventListener("click", () => {
                    const newLang = getLang() === "en" ? "th" : "en";
                    applyLang(newLang);
                });
            });
        </script>
</body>

</html>
