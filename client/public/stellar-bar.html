<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="assets/styles/global.css">
    <link rel="stylesheet" href="assets/styles/stellar-bar-style.css">
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
    <title>Stellar bar</title>
</head>

<body>
    <a href="index.html" class="home-btn">&lt;</a>
    <button id="lang-toggle" aria-label="Switch language" aria-pressed="false">TH</button>
    <button id="info-btn">üîÆ</button>
    <div id="info-box">
        <h2>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h2>
        <p>‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏ö‡∏≤‡∏£‡πå‡πÄ‡∏ó‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏ô‡∏∏‡πà‡∏° ‚Äú‡∏û‡∏≤‡∏£‡πå‡∏•‚Äù ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à
            ‡∏≠‡∏µ‡∏Å‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏Ç‡∏≤‡∏¢‡∏±‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢</p>
    </div>
    <div class="bg" id="bar-bg">
        <div class="star-field">
            <div class="layer"></div>
            <div class="layer"></div>
            <div class="layer"></div>
        </div>
    </div>
    <div class="layout">
        <main id="stellar-bar-main">
            <h1>Stellar Bar</h1>

            <div id="question">
                <label>Welcome to the Stellar Bar ‚Äî a place among the stars where your soul can speak
                    freely.‚Äù</label><br>
                <input type="text" class="text-input" id="quest" name="quest" required="" value=""
                    placeholder="type here...">
                <button class="btn" id="draw-btn">Send</button>
            </div>
            <!-- Container ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö chat -->
            <div id="chat-history"></div>
        </main>
        <aside id="stellar-bar-aside">
            <div id="bartender">
                <img src="assets/images/bartender-new.png" alt="Bartender">
            </div>
        </aside>
    </div>

    <!-- ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÇ‡∏´‡∏•‡∏î bartender.js -->
    <script src="scripts/bartender.js" type="module"></script>
    <script>
        const infoBtn = document.getElementById("info-btn");
        const infoBox = document.getElementById("info-box");

        infoBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            infoBox.classList.toggle("show");
        });

        document.addEventListener("click", (e) => {
            if (!infoBox.contains(e.target) && e.target !== infoBtn) {
                infoBox.classList.remove("show");
            }
        });
    </script>
    <script>
        const translations = {
            en: {
                title: "Stellar Bar",
                welcome: "Welcome to the Stellar Bar ‚Äî a place among the stars where your soul can speak freely.",
                placeholder: "type here...",
                send: "Send",
            },
            th: {
                title: "‡∏ö‡∏≤‡∏£‡πå‡πÅ‡∏´‡πà‡∏á‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß",
                welcome: "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏ö‡∏≤‡∏£‡πå‡πÅ‡∏´‡πà‡∏á‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß ‚Äî ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πà‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏°‡∏π‡πà‡∏î‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏π‡∏î‡∏à‡∏≤‡∏Å‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏¥‡∏™‡∏£‡∏∞",
                placeholder: "‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ...",
                send: "‡∏™‡πà‡∏á",
            }
        };

        const LANG_KEY = "siteLang";
        const DEFAULT_LANG = "en";

        function getLang() {
            return localStorage.getItem(LANG_KEY) || DEFAULT_LANG;
        }

        function applyLang(lang) {
            document.documentElement.lang = lang;

            document.title = translations[lang].title;
            document.querySelector("h1").textContent = translations[lang].title;

            const label = document.querySelector("#question label");
            if (label) label.textContent = translations[lang].welcome;

            const input = document.querySelector("#quest");
            if (input) input.placeholder = translations[lang].placeholder;

            const button = document.querySelector("#draw-btn");
            if (button) button.textContent = translations[lang].send;

            const toggleBtn = document.querySelector("#lang-toggle");
            if (toggleBtn) {
                toggleBtn.textContent = lang === "en" ? "TH" : "EN";
                toggleBtn.setAttribute("aria-pressed", lang === "th");
            }

            localStorage.setItem(LANG_KEY, lang);
        }

        document.addEventListener("DOMContentLoaded", () => {
            const currentLang = getLang();
            applyLang(currentLang);

            const btn = document.getElementById("lang-toggle");
            btn.addEventListener("click", () => {
                const newLang = getLang() === "en" ? "th" : "en";
                applyLang(newLang);
            });
        });
    </script>
</body>
</html>
